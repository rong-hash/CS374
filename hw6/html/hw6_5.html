<!DOCTYPE html>
    <html>
    <head>
        <meta charset="UTF-8">
        <title>ECE374 SP23 HW6</title>
        <style>
/* From extension vscode.github */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.vscode-dark img[src$=\#gh-light-mode-only],
.vscode-light img[src$=\#gh-dark-mode-only] {
	display: none;
}

</style>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<link href="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.css" rel="stylesheet" type="text/css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/markdown.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/highlight.css">
<style>
            body {
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe WPC', 'Segoe UI', system-ui, 'Ubuntu', 'Droid Sans', sans-serif;
                font-size: 14px;
                line-height: 1.6;
            }
        </style>
        <style>
.task-list-item {
    list-style-type: none;
}

.task-list-item-checkbox {
    margin-left: -20px;
    vertical-align: middle;
    pointer-events: none;
}
</style>
        
    </head>
    <body class="vscode-body vscode-light">
        <h1 id="ece374-sp23-hw6">ECE374 SP23 HW6</h1>
<h2 id="contributors">Contributors</h2>
<p>Zhirong Chen (zhirong4)</p>
<p>Ziyuan Chen (ziyuanc3)</p>
<br>
<h2 id="problem-5">Problem 5</h2>
<p><strong>Expressions as Graphs.</strong></p>
<p><strong>(a)</strong> Suppose an arithmetic expression is given as a tree. Each leaf is an integer and each internal node is one of the standard arithmetical operations (<code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>). Give an <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span> algorithm for evaluating such an expression, where there are <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span> nodes in the tree.</p>
<p><strong>(b)</strong> Suppose an arithmetic expression is given as a DAG with common subexpressions removed. Each leaf is an integer and each internal node is
one of the standard arithmetical operations (<code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>). Give an <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo>+</mo><mi>m</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n+m)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">m</span><span class="mclose">)</span></span></span></span> algorithm for evaluating such a DAG with <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">n</span></span></span></span> nodes and <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">m</span></span></span></span> edges.</p>
<br>
<h2 id="solution">Solution</h2>
<p><em>Example Abstract Syntax Tree (AST) parsing <a href="https://github.com/AllenHeartcore/ECE220_ZJUI21fa/blob/master/mp/mp11/ece220_parse.y">algorithm</a> by <a href="http://lumetta.web.engr.illinois.edu">Steven S. Lumetta</a></em></p>
<h3 id="a"><strong>(a)</strong></h3>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>EvalExpTree</mtext><mo stretchy="false">(</mo><mi>T</mi><mo stretchy="false">)</mo><mspace linebreak="newline"></mspace><mspace width="2em"/><mrow><mtext mathvariant="bold">if</mtext><mtext> </mtext></mrow><mi>T</mi><mtext> is an operator</mtext><mspace linebreak="newline"></mspace><mspace width="2em"/><mspace width="2em"/><mi>a</mi><mo>←</mo><mtext>EvalExpTree</mtext><mo stretchy="false">(</mo><mi>T</mi><mi mathvariant="normal">.</mi><mtext>left</mtext><mo stretchy="false">)</mo><mspace linebreak="newline"></mspace><mspace width="2em"/><mspace width="2em"/><mi>b</mi><mo>←</mo><mtext>EvalExpTree</mtext><mo stretchy="false">(</mo><mi>T</mi><mi mathvariant="normal">.</mi><mtext>right</mtext><mo stretchy="false">)</mo><mspace linebreak="newline"></mspace><mspace width="2em"/><mspace width="2em"/><mrow><mtext mathvariant="bold">return</mtext><mtext> </mtext></mrow><mi>a</mi><mtext> </mtext><mi>T</mi><mtext> </mtext><mi>b</mi><mspace linebreak="newline"></mspace><mspace width="2em"/><mtext mathvariant="bold">else</mtext><mspace linebreak="newline"></mspace><mspace width="2em"/><mspace width="2em"/><mrow><mtext mathvariant="bold">return</mtext><mtext> </mtext></mrow><mi>T</mi></mrow><annotation encoding="application/x-tex">\text{EvalExpTree}(T) \\
\qquad \textbf{if } T \text{ is an operator} \\
\qquad \qquad a \gets \text{EvalExpTree}(T.\text{left}) \\
\qquad \qquad b \gets \text{EvalExpTree}(T.\text{right}) \\
\qquad \qquad \textbf{return } a \text{ } T \text{ } b \\
\qquad \textbf{else} \\
\qquad \qquad \textbf{return } T
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord text"><span class="mord">EvalExpTree</span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mclose">)</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mspace" style="margin-right:2em;"></span><span class="mord text"><span class="mord textbf">if </span></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mord text"><span class="mord"> is an operator</span></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mspace" style="margin-right:2em;"></span><span class="mspace" style="margin-right:2em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">←</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord text"><span class="mord">EvalExpTree</span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mord">.</span><span class="mord text"><span class="mord">left</span></span><span class="mclose">)</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mspace" style="margin-right:2em;"></span><span class="mspace" style="margin-right:2em;"></span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">←</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord text"><span class="mord">EvalExpTree</span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mord">.</span><span class="mord text"><span class="mord">right</span></span><span class="mclose">)</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mspace" style="margin-right:2em;"></span><span class="mspace" style="margin-right:2em;"></span><span class="mord text"><span class="mord textbf">return </span></span><span class="mord mathnormal">a</span><span class="mord text"><span class="mord"> </span></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mord text"><span class="mord"> </span></span><span class="mord mathnormal">b</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mspace" style="margin-right:2em;"></span><span class="mord text"><span class="mord textbf">else</span></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mspace" style="margin-right:2em;"></span><span class="mspace" style="margin-right:2em;"></span><span class="mord text"><span class="mord textbf">return </span></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span></span></span></p>
<p>This pseudocode is equivalent to using a stack to store the intermediate results.</p>
<ul>
<li>We initialize the stack by pushing the tree nodes in a <strong>post-order</strong> traversal.</li>
<li>When we encounter an operator, we pop two operands, perform the operation, and push the result back.</li>
<li>When we encounter an operand, we push it back.</li>
<li>When we reach the base, the result is on the stack top.</li>
</ul>
<p>Each node is visited once and pushed once, yielding time complexity of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span>.</p>
<br>
<h3 id="b"><strong>(b)</strong></h3>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>EvalExpDAG</mtext><mo stretchy="false">(</mo><mi>G</mi><mo stretchy="false">)</mo><mspace linebreak="newline"></mspace><mspace width="2em"/><mrow><mtext mathvariant="bold">if</mtext><mtext> </mtext></mrow><mi>G</mi><mtext> is an operator</mtext><mspace linebreak="newline"></mspace><mspace width="2em"/><mspace width="2em"/><mi>a</mi><mo>←</mo><mtext>EvalExpDAG</mtext><mo stretchy="false">(</mo><mi>G</mi><mi mathvariant="normal">.</mi><mtext>left</mtext><mo stretchy="false">)</mo><mspace linebreak="newline"></mspace><mspace width="2em"/><mspace width="2em"/><mi>b</mi><mo>←</mo><mtext>EvalExpDAG</mtext><mo stretchy="false">(</mo><mi>G</mi><mi mathvariant="normal">.</mi><mtext>right</mtext><mo stretchy="false">)</mo><mspace linebreak="newline"></mspace><mspace width="2em"/><mspace width="2em"/><mi>G</mi><mo>←</mo><mi>a</mi><mtext> </mtext><mi>G</mi><mtext> </mtext><mi>b</mi><mspace width="2em"/><mtext>// </mtext><mi>G</mi><mtext> is now an operand</mtext><mspace linebreak="newline"></mspace><mspace width="2em"/><mrow><mtext mathvariant="bold">return</mtext><mtext> </mtext></mrow><mi>G</mi></mrow><annotation encoding="application/x-tex">\text{EvalExpDAG}(G) \\
\qquad \textbf{if } G \text{ is an operator} \\
\qquad \qquad a \gets \text{EvalExpDAG}(G.\text{left}) \\
\qquad \qquad b \gets \text{EvalExpDAG}(G.\text{right}) \\
\qquad \qquad G \gets a \text{ } G \text{ } b \qquad \text{// } G \text{ is now an operand} \\
\qquad \textbf{return } G
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord text"><span class="mord">EvalExpDAG</span></span><span class="mopen">(</span><span class="mord mathnormal">G</span><span class="mclose">)</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mspace" style="margin-right:2em;"></span><span class="mord text"><span class="mord textbf">if </span></span><span class="mord mathnormal">G</span><span class="mord text"><span class="mord"> is an operator</span></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mspace" style="margin-right:2em;"></span><span class="mspace" style="margin-right:2em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">←</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord text"><span class="mord">EvalExpDAG</span></span><span class="mopen">(</span><span class="mord mathnormal">G</span><span class="mord">.</span><span class="mord text"><span class="mord">left</span></span><span class="mclose">)</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.6944em;"></span><span class="mspace" style="margin-right:2em;"></span><span class="mspace" style="margin-right:2em;"></span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">←</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord text"><span class="mord">EvalExpDAG</span></span><span class="mopen">(</span><span class="mord mathnormal">G</span><span class="mord">.</span><span class="mord text"><span class="mord">right</span></span><span class="mclose">)</span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mspace" style="margin-right:2em;"></span><span class="mspace" style="margin-right:2em;"></span><span class="mord mathnormal">G</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">←</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">a</span><span class="mord text"><span class="mord"> </span></span><span class="mord mathnormal">G</span><span class="mord text"><span class="mord"> </span></span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:2em;"></span><span class="mord text"><span class="mord">// </span></span><span class="mord mathnormal">G</span><span class="mord text"><span class="mord"> is now an operand</span></span></span><span class="mspace newline"></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mspace" style="margin-right:2em;"></span><span class="mord text"><span class="mord textbf">return </span></span><span class="mord mathnormal">G</span></span></span></span></p>
<p>We memoize intermediate results in DAG nodes. Each time the &quot;value&quot; of an <strong>operator node</strong> is evaluated, the node is overwritten with the result and becomes an <strong>operand node</strong>.</p>
<p>Each node is visited once, but requesting the memoized values still involves traversing all the edges. Total time complexity of <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo>+</mo><mi>m</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n+m)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">m</span><span class="mclose">)</span></span></span></span>.</p>

        <script async src="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.js"></script>
        
    </body>
    </html>