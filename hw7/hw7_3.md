# ECE374 SP23 HW7

## Contributors

Zhirong Chen (zhirong4)

Ziyuan Chen (ziyuanc3)

<br>

## Problem 3

Your job is to arrange $n$ schildren in a straight line, facing front. You are given a list of $m$ statements of the form "$i$ hates $j$," which indicates that $i$ cannot be put somewhere behind $j$.

**(a)** Give an algorithm that orders the line (or says that it is not possible) in $O(m + n)$ time.

**(b)** Suppose instead you want to arrange the children in rows such that if $i$ hates $j$, then $i$ must be in a lower numbered row than $j$. Give an efficient algorithm to find the minimum number of rows needed, if possible.

<br>

## Solution

### **(a)**

Sort_Line:

1. Construct the graph based on the hatred relation.
   - Each student is viewed as a node
   - If one student u hates another student v, then there is an edge e pointing from u to v
2. Do the topological sort on the graph, the node rank is basically the order of the students. If a cycle is detected in the topological sorting procedure, then there doesn't exist a queue order of these ill-behaved students.

### **(b)**

1. Construct 2 queues: current queue and next queue. Find all vertices with no incoming edges and add them to current queue. Construct the order dictionary, the rows will be stored in the dictionary.
2. While current queue and next queue is not empty:
   
    construct a new row

    while current queue is not empty:

    a. Dequeue a vertex from the current queue and add it to the current row.

    b. For each vertex adjacent to the dequeued vertex:

    i. Remove the edge connecting the dequeued vertex and the adjacent vertex.

    ii. If the adjacent vertex has no other incoming edges, add it to the next queue.

    After clearing the current row, switch the current queue and the next queue. Add the current row to the Order Dictionary.
3. If all edges have been removed from the graph, the topological order is successfully found. Then we can count the row number of the order dictionary. If there are still edges remaining, it indicates a cycle, and a topological order is not possible.


